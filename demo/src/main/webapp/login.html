<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>登录</title>

<!-- Bootstrap -->
<link href="css/bootstrap.min.css" rel="stylesheet">
<!-- Font Awesome -->
<link href="css/font-awesome.min.css" rel="stylesheet">
<!-- NProgress -->
<link href="css/nprogress.css" rel="stylesheet">
<!-- Animate.css -->
<link href="css/animate.min.css" rel="stylesheet">

<!-- Custom Theme Style -->
<link href="css/custom.min.css" rel="stylesheet">

<!-- jQuery -->
<script src="js/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="js/bootstrap.min.js"></script>
</head>

<body class="login">
<script type="text/javascript">
$(document).ready(function(){
	kickout();
	/* 生成验证码 */
	initCode();
});

/* 是否踢出 */
function kickout(){
	var url = location.href; 
	var kickout = url.split("kickout=")[1];
	if (kickout == 1){
		alert("您的账号在其他地方登陆，您已被迫退出!");
	}
}
/* 生成验证码 */
function initCode(){
	$("#randomValidateCode").attr("src","login/getRandomValidateCode?data=" + new Date());
}

/* 点击图片刷新 */


/* 登录 */
function loginin(){
	var login_telphone = $("#login_telphone").val();
	var login_password = $("#login_password").val();
	var login_randomValidateCode = $("#login_randomValidateCode").val();
	$.ajax({
		type : 'POST',
		dataType : "json",
		url : "login/loginin",
		data : {
			"telphone" : login_telphone,
			"password" : login_password,
			"login_randomValidateCode": login_randomValidateCode
		},
		success : function(data) {
			if(data == 1){
				location.href = "index.html";
			}else if(data == -1){
				alert("验证码错误");
				initCode();
			}else{
				alert("用户名密码错误");
				initCode();
			}				
		}
	});
}
</script>
	<div>
		<a class="hiddenanchor" id="signup"></a> <a class="hiddenanchor"
			id="signin"></a>
		<div class="login_wrapper">
			<div class="animate form login_form">
				<section class="login_content">
					<h1>Login Form</h1>
					<div>
						<input type="text" class="form-control" placeholder="Telphone" id = "login_telphone" required />
					</div>
					<div style = "margin-top:10px">
						<input type="password" class="form-control" placeholder="Password" id = "login_password" required />
					</div>
					<div style = "margin-top:10px">
						<input type="text" class="form-control" placeholder="验证码" id = "login_randomValidateCode" required />
					</div>
					<img id="randomValidateCode" style = "margin-top:10px" onclick = "initCode()"><span>点击图片刷新</span>
					<div style = "margin-top:10px">
						<button class="btn btn-default" id = "login" onclick = "loginin()">登录</button> <a class="reset_pass" href="#">Lost your password?</a>
					</div>

					<div class="clearfix"></div>

					<div class="separator">
						<p class="change_link">
							New to site? <a href="#signup" class="to_register"> Create
								Account </a>
						</p>

						<div class="clearfix"></div>
						<br />

						<div>
							<h1>
								<i class="fa fa-paw"></i> Gentelella Alela!
							</h1>
							<p>©2016 All Rights Reserved. Gentelella Alela! is a Bootstrap 3 template. Privacy and Terms</p>
						</div>
					</div>
				</section>
			</div>

			<div id="register" class="animate form registration_form">
				<section class="login_content">
					<form>
						<h1>Create Account</h1>
						<div>
							<input type="text" class="form-control" placeholder="Username" />
						</div>
						<div>
							<input type="email" class="form-control" placeholder="Email" />
						</div>
						<div>
							<input type="password" class="form-control"
								placeholder="Password" />
						</div>
						<div>
							<a class="btn btn-default submit" href="index.html">Submit</a>
						</div>

						<div class="clearfix"></div>

						<div class="separator">
							<p class="change_link">
								Already a member ? <a href="#signin" class="to_register">
									Log in </a>
							</p>
							<div class="clearfix"></div>
							<br />
							<div>
								<h1>
									<i class="fa fa-paw"></i> Gentelella Alela!
								</h1>
								<p>©2016 All Rights Reserved. Gentelella Alela! is a
									Bootstrap 3 template. Privacy and Terms</p>
							</div>
						</div>
					</form>
				</section>
			</div>
		</div>
	</div>
</body>
</html>
